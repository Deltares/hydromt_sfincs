

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Build a riverine SFINCS model from scratch &mdash; hydromt_sfincs  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "document", "processHtmlClass": "math|output_area"}}</script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Update existing Sfincs model with boundary conditions and forcing" href="update_model.html" />
    <link rel="prev" title="Make a coastal sfincs model from scratch using hydromt" href="build_coastal_model.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> hydromt_sfincs
          

          
          </a>

          
            
            
              <div class="version">
                0.1.1.dev
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../examples/index.html">Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="build_coastal_model.html">Build a coastal SFINCS model</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Build a riverine SFINCS model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#hydroMT-CLI-build-interface">hydroMT CLI build interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="#setup-SFINCS-model-base-layers">setup SFINCS model base layers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Model-setup-configuration">Model setup configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Data-for-model-setup">Data for model setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Setup-complete-SFINCS-model">Setup complete SFINCS model</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Visualize-and/or-inspect-model-schematization">Visualize and/or inspect model schematization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Inspecting-the-model">Inspecting the model</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="update_model.html">Update SFINCS model components</a></li>
<li class="toctree-l2"><a class="reference internal" href="sfincs_results_hmax.html">SFINCS results: maximum water depth</a></li>
<li class="toctree-l2"><a class="reference internal" href="sfincs_results_animation.html">SFINCS results: create animation</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_from_py.html">Build a SFINCS model from python</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/sfincs.html">SFINCS model: General</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/sfincs_coastal.html">Setting up a coastal model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/sfincs_riverine.html">Setting up a riverine model</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">References &amp; Help</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/api_index.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">What’s new</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">hydromt_sfincs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../examples/index.html">Examples</a> &raquo;</li>
        
      <li>Build a riverine SFINCS model from scratch</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/_examples/build_riverine_model.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="Build-a-riverine-SFINCS-model-from-scratch">
<h1>Build a riverine SFINCS model from scratch<a class="headerlink" href="#Build-a-riverine-SFINCS-model-from-scratch" title="Permalink to this headline">¶</a></h1>
<p>This notebook demonstrates how to prepare <strong>SFINCS</strong> model from scratch using the command line interace (CLI).</p>
<p>All lines in this notebook which start with <code class="docutils literal notranslate"><span class="pre">!</span></code> are executed from the command line. Within the notebook environment the logging messages are shown after completion. You can also copy these lines and paste these in your shell to get more direct feedback.</p>
<div class="section" id="hydroMT-CLI-build-interface">
<h2>hydroMT CLI build interface<a class="headerlink" href="#hydroMT-CLI-build-interface" title="Permalink to this headline">¶</a></h2>
<p>Lets first check if the SFINCS model is recognized by hydromt</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># this should return &quot;sfincs&quot;</span>
<span class="o">!</span>hydromt --models
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
hydroMT model plugins: sfincs (v0.1.1.dev0)

</pre></div></div>
</div>
<p>Using the <strong>hydromt build</strong> API we can setup a complete model from scratch. Let’s get an overview of all the available options:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="o">!</span>hydromt build --help
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Usage: hydromt build [OPTIONS] MODEL MODEL_ROOT REGION

  Build models from source data.

  Example usage:
  --------------

  To build a wflow model for a subbasin using and point coordinates snapped to cells with stream order &gt;= 4
  hydromt build wflow /path/to/model_root &#34;{&#39;subbasin&#39;: [-7.24, 62.09], &#39;strord&#39;: 4}&#34; -i /path/to/wflow_config.ini

  To build a wflow model based on basin ID
  hydromt build wflow /path/to/model_root &#34;{&#39;basin&#39;: 230001006}&#34;

  To build a sfincs model based on a bbox (for Texel)
  hydromt build sfincs /path/to/model_root &#34;{&#39;bbox&#39;: [4.6891,52.9750,4.9576,53.1994]}&#34;

Options:
  -r, --res FLOAT             Model resolution in model src.
  --build-base / --build-all  Deprecated!
  --opt TEXT                  Component specific keyword arguments, see the
                              setup_&lt;component&gt; method of the specific model
                              for more information about the arguments.

  -i, --config PATH           Path to hydroMT configuration file, for the
                              model specific implementation.

  -d, --data PATH             File path to yml data sources file. See
                              documentation for required yml file format.

  --dd, --deltares-data       Parse default deltares data yml from
                              https://github.com/DirkEilander/hydromt-
                              artifacts/releases

  -q, --quiet                 Decrease verbosity.
  -v, --verbose               Increase verbosity.
  --help                      Show this message and exit.

</pre></div></div>
</div>
</div>
<div class="section" id="setup-SFINCS-model-base-layers">
<h2>setup SFINCS model base layers<a class="headerlink" href="#setup-SFINCS-model-base-layers" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># NOTE: copy this line (without !) to your shell for more direct feedback</span>
<span class="o">!</span>hydromt build sfincs <span class="s2">&quot;./sfincs_test_base&quot;</span> <span class="s2">&quot;{&#39;bbox&#39;: [11.97,45.78,12.28,45.94]}&quot;</span> -r <span class="m">100</span> -vv
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
2021-07-22 14:26:31,458 - build - log - DEBUG - Writing log messages to new file /home/runner/work/hydromt_sfincs/hydromt_sfincs/docs/_examples/sfincs_test_base/hydromt.log.
2021-07-22 14:26:31,458 - build - log - INFO - HydroMT version: v0.4.2.dev
2021-07-22 14:26:31,458 - build - main - INFO - Building instance of sfincs model at /home/runner/work/hydromt_sfincs/hydromt_sfincs/docs/_examples/sfincs_test_base.
2021-07-22 14:26:31,458 - build - main - INFO - User settings:
2021-07-22 14:26:31,461 - build - model_plugins - DEBUG - Loaded model plugin &#39;sfincs = hydromt_sfincs.sfincs.SfincsModel&#39; (0.1.1.dev0)
2021-07-22 14:26:31,461 - build - model_api - INFO - Initializing sfincs model from hydromt_sfincs (v0.1.1.dev0).
2021-07-22 14:26:31,462 - build - model_api - INFO - setup_basemaps.region: {&#39;bbox&#39;: [11.97, 45.78, 12.28, 45.94]}
2021-07-22 14:26:31,462 - build - model_api - INFO - setup_basemaps.res: 100.0
2021-07-22 14:26:31,462 - build - model_api - INFO - setup_basemaps.crs: utm
2021-07-22 14:26:31,462 - build - model_api - INFO - setup_basemaps.basemaps_fn: merit_hydro
2021-07-22 14:26:31,462 - build - model_api - INFO - setup_basemaps.basin_index_fn: merit_hydro_index
2021-07-22 14:26:31,462 - build - model_api - INFO - setup_basemaps.reproj_method: bilinear
2021-07-22 14:26:31,462 - build - data_adapter - INFO - Updating data sources from yml file /home/runner/.hydromt_data/data/v0.0.4/data_catalog.yml
2021-07-22 14:26:31,532 - build - data_adapter - INFO - DataCatalog: Getting merit_hydro RasterDataset raster data from /home/runner/.hydromt_data/data/v0.0.4/merit_hydro/{variable}.tif
2021-07-22 14:26:31,613 - build - basin_mask - DEBUG - Parsed region (kind=bbox): {&#39;bbox&#39;: [11.97, 45.78, 12.28, 45.94]}
2021-07-22 14:26:31,765 - build - model_api - DEBUG - Default config read from /usr/share/miniconda/envs/hydromt-sfincs/lib/python3.9/site-packages/hydromt_sfincs/data/sfincs/sfincs.inp
2021-07-22 14:26:31,766 - build - sfincs - INFO - Write model data to /home/runner/work/hydromt_sfincs/hydromt_sfincs/docs/_examples/sfincs_test_base
2021-07-22 14:26:31,766 - build - model_api - INFO - Writing model config to /home/runner/work/hydromt_sfincs/hydromt_sfincs/docs/_examples/sfincs_test_base/sfincs.inp
2021-07-22 14:26:31,771 - build - sfincs - DEBUG - Write binary map indices based on mask.
2021-07-22 14:26:31,812 - build - sfincs - DEBUG - Write binary map files: [&#39;dep&#39;, &#39;msk&#39;].
2021-07-22 14:26:31,870 - build - sfincs - DEBUG - Write GIS files for staticmaps to &#39;gis&#39; subfolder

</pre></div></div>
</div>
<p>The example above means the following: run <strong>hydromt build</strong> with:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sfincs</span></code> : i.e. build a sfincs model</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">./sfincs_test_base</span></code> : output model folder</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;{'bbox':</span> <span class="pre">[11.97,45.78,12.28,45.94]}&quot;</span></code> : make a model that is active for the full given bounding box. All <em>REGION</em> options are described in the <a class="reference external" href="https://deltares.github.io/hydromt/latest/user_guide/cli.html#region-options">docs</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-r</span> <span class="pre">100</span></code> : build the model at a 100 meter resolution</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-vv</span></code> : give some extra verbosity (2 * v) to display feedback on screen. Now debug messages are provided.</p></li>
</ul>
<p>NOTE: As we did not specify a model configuration, only the base maps (topography) have been setup using default parameters. To build a complete model we need the use a configuraton ini-file.</p>
</div>
<div class="section" id="Model-setup-configuration">
<h2>Model setup configuration<a class="headerlink" href="#Model-setup-configuration" title="Permalink to this headline">¶</a></h2>
<p>The ini-file contains the model setup configuration and determines which components are build and in which order and optionally sets non-default arguments for each component. This configuration is passed to hydromt using <code class="docutils literal notranslate"><span class="pre">-i</span> <span class="pre">&lt;path_to_ini_file&gt;</span></code>. We have prepared several example ini-files which are available in the model repository <a class="reference external" href="https://github.com/Deltares/hydromt_sfincs/tree/main/examples">examples folder</a> and from the
<a class="reference external" href="https://deltares.github.io/hydromt_sfincs/latest/user_guide/sfincs/build_configuration.html">docs(build_configuration)</a>.</p>
<p>Each header as shown between <code class="docutils literal notranslate"><span class="pre">[...]</span></code> (e.g. <code class="docutils literal notranslate"><span class="pre">[setup_basemaps]</span></code>) corresponds to a model component. All model components are explained in the <a class="reference external" href="https://deltares.github.io/hydromt_sfincs/latest/user_guide/sfincs/components.html">docs(model_components)</a>.</p>
<p>We will load the default SFINCS build ini file for inspection:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">fn_ini</span> <span class="o">=</span> <span class="s1">&#39;sfincs_riverine.ini&#39;</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fn_ini</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">txt</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">txt</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[global]
write_gis = True                # write addtional geotif and geojson files to gis subfolder
config_fn = sfincs.inp          # name of sfincs config (inp) file

[setup_config]
tref = 20210101 000000
tstart = 20210101 000000
tstop = 20210102 000000
alpha = 0.5
zsini = 0.0
dtmaxout = 86400

[setup_basemaps]
basemaps_fn = merit_hydro       # hydrography basemaps [&#39;elevtn&#39;, &#39;flwdir&#39;, &#39;uparea&#39;, &#39;basins&#39;]
crs = utm                       # model CRS (must be UTM zone)

[setup_cn_infiltration]
cn_fn = gcn250                  # curve number source
antecedent_runoff_conditions = avg # for gcn250: {&#39;dry&#39;, &#39;avg&#39;, &#39;wet&#39;}

[setup_manning_roughness]
lulc_fn = vito                  # land-use land-cover source
map_fn = None                   # mapping file. read from hydromt/data/lulc/{lulc_fn}_mapping.csv if None

[setup_river_outflow]
basemaps_fn = merit_hydro       # hydrography basemaps [flwdir&#39;, &#39;uparea&#39;], should be same as under [basemaps]
river_upa = 5                   # Mimimum upstream area threshold (km2) of river cells
outflow_width = 2500             # The width [m] of the outflow boundary

[setup_gauges]
gauges_fn = riverine_gauges.csv   # gauges point locations
crs = 4326                      # epsg-code for gauges (only used if not in gauges_fn metadata, e.g. when csv file)

[setup_river_inflow]
basemaps_fn = merit_hydro       # hydrography basemaps [flwdir&#39;, &#39;uparea&#39;], should be same as under [basemaps]
river_upa = 25                  # Mimimum upstream area threshold (km2) of river cells

[setup_q_forcing]
dataset_fn = None                #  discharge point timeseries dataset
timeseries_fn = discharge_input_sfincs.csv   # timeseries data at discharge gauges (e.g.: from setup_river_inflow)


</pre></div></div>
</div>
</div>
<div class="section" id="Data-for-model-setup">
<h2>Data for model setup<a class="headerlink" href="#Data-for-model-setup" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">&lt;...&gt;_fn</span></code> arguments correspond to a data source from the <code class="docutils literal notranslate"><span class="pre">DataCatalog</span></code> which is based on a yml-file with references to the data paths/urls and how the data should be read. This file can be provided to hydromt using <code class="docutils literal notranslate"><span class="pre">-d</span> <span class="pre">&lt;path_to_yml_file&gt;</span></code>.</p>
<p>By default some example data for the Piave basin will be downloaded to <code class="docutils literal notranslate"><span class="pre">$USER_ROOT$/.hydromt_data/</span></code> which is also used for this example. An overview of the available example data is provided <a class="reference external" href="https://deltares.github.io/hydromt/latest/user_guide/data.html#available-global-datasets">here</a> This example data is a based on the data which available from the Deltares p-drive. If you have acces to this drive, a pre-configured catalog file can be loaded using the <code class="docutils literal notranslate"><span class="pre">--dd</span></code> flag.</p>
<p>More background how to write a data catalog yml file can be found in the <a class="reference external" href="https://deltares.github.io/hydromt/latest/user_guide/data.html">hydromt core docs</a></p>
</div>
<div class="section" id="Setup-complete-SFINCS-model">
<h2>Setup complete SFINCS model<a class="headerlink" href="#Setup-complete-SFINCS-model" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># NOTE: copy this line (without !) to your shell for more direct feedback</span>
<span class="o">!</span>hydromt build sfincs <span class="s2">&quot;./sfincs_test_full&quot;</span> <span class="s2">&quot;{&#39;bbox&#39;: [11.97,45.78,12.28,45.94]}&quot;</span> -r <span class="m">50</span> -i sfincs_riverine.ini -vv
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
2021-07-22 14:26:34,106 - build - log - DEBUG - Writing log messages to new file /home/runner/work/hydromt_sfincs/hydromt_sfincs/docs/_examples/sfincs_test_full/hydromt.log.
2021-07-22 14:26:34,106 - build - log - INFO - HydroMT version: v0.4.2.dev
2021-07-22 14:26:34,106 - build - main - INFO - Building instance of sfincs model at /home/runner/work/hydromt_sfincs/hydromt_sfincs/docs/_examples/sfincs_test_full.
2021-07-22 14:26:34,106 - build - main - INFO - User settings:
2021-07-22 14:26:34,111 - build - model_plugins - DEBUG - Loaded model plugin &#39;sfincs = hydromt_sfincs.sfincs.SfincsModel&#39; (0.1.1.dev0)
2021-07-22 14:26:34,111 - build - model_api - INFO - Initializing sfincs model from hydromt_sfincs (v0.1.1.dev0).
2021-07-22 14:26:34,111 - build - model_api - DEBUG - Setting model config options.
2021-07-22 14:26:34,112 - build - model_api - DEBUG - Default config read from /usr/share/miniconda/envs/hydromt-sfincs/lib/python3.9/site-packages/hydromt_sfincs/data/sfincs/sfincs.inp
2021-07-22 14:26:34,113 - build - model_api - INFO - setup_basemaps.region: {&#39;bbox&#39;: [11.97, 45.78, 12.28, 45.94]}
2021-07-22 14:26:34,113 - build - model_api - INFO - setup_basemaps.res: 50.0
2021-07-22 14:26:34,113 - build - model_api - INFO - setup_basemaps.crs: utm
2021-07-22 14:26:34,113 - build - model_api - INFO - setup_basemaps.basemaps_fn: merit_hydro
2021-07-22 14:26:34,113 - build - model_api - INFO - setup_basemaps.basin_index_fn: merit_hydro_index
2021-07-22 14:26:34,113 - build - model_api - INFO - setup_basemaps.reproj_method: bilinear
2021-07-22 14:26:34,113 - build - data_adapter - INFO - Updating data sources from yml file /home/runner/.hydromt_data/data/v0.0.4/data_catalog.yml
2021-07-22 14:26:34,182 - build - data_adapter - INFO - DataCatalog: Getting merit_hydro RasterDataset raster data from /home/runner/.hydromt_data/data/v0.0.4/merit_hydro/{variable}.tif
2021-07-22 14:26:34,262 - build - basin_mask - DEBUG - Parsed region (kind=bbox): {&#39;bbox&#39;: [11.97, 45.78, 12.28, 45.94]}
2021-07-22 14:26:34,429 - build - model_api - INFO - setup_cn_infiltration.cn_fn: gcn250
2021-07-22 14:26:34,429 - build - model_api - INFO - setup_cn_infiltration.antecedent_runoff_conditions: avg
2021-07-22 14:26:34,439 - build - data_adapter - INFO - DataCatalog: Getting gcn250 RasterDataset raster data from /home/runner/.hydromt_data/data/v0.0.4/gcn250/{variable}.tif
2021-07-22 14:26:34,472 - build - data_adapter - DEBUG - RasterDataset: Clip with geom - [11.961, 45.772, 12.288, 45.948]
2021-07-22 14:26:34,558 - build - model_api - INFO - setup_manning_roughness.lulc_fn: vito
2021-07-22 14:26:34,558 - build - model_api - INFO - setup_manning_roughness.map_fn: None
2021-07-22 14:26:34,567 - build - data_adapter - INFO - DataCatalog: Getting vito RasterDataset raster data from /home/runner/.hydromt_data/data/v0.0.4/vito.tif
2021-07-22 14:26:34,600 - build - data_adapter - DEBUG - RasterDataset: Clip with geom - [11.961, 45.772, 12.288, 45.948]
2021-07-22 14:26:34,663 - build - landuse - INFO - Deriving N using average resampling (nodata=-999.0).
2021-07-22 14:26:34,717 - build - model_api - INFO - setup_river_outflow.river_upa: 5
2021-07-22 14:26:34,717 - build - model_api - INFO - setup_river_outflow.outflow_width: 2500
2021-07-22 14:26:34,717 - build - model_api - INFO - setup_river_outflow.basemaps_fn: merit_hydro
2021-07-22 14:26:34,726 - build - data_adapter - INFO - DataCatalog: Getting merit_hydro RasterDataset raster data from /home/runner/.hydromt_data/data/v0.0.4/merit_hydro/{variable}.tif
2021-07-22 14:26:34,806 - build - data_adapter - DEBUG - RasterDataset: Clip with geom - [11.961, 45.772, 12.288, 45.948]
2021-07-22 14:26:34,908 - build - sfincs - DEBUG - Get river cells for outflow points; upstream area threshold: 5 km2.
2021-07-22 14:26:35,787 - build - sfincs - DEBUG - Set msk=3 outflow points.
2021-07-22 14:26:35,831 - build - sfincs - DEBUG - 14 river outflow points found.
2021-07-22 14:26:35,955 - build - sfincs - DEBUG - 662 outflow (mask=3) boundary cells set.
2021-07-22 14:26:35,956 - build - sfincs - DEBUG - Vectorize rivers used for setting outflow points.
2021-07-22 14:26:36,182 - build - model_api - INFO - setup_gauges.gauges_fn: /home/runner/work/hydromt_sfincs/hydromt_sfincs/docs/_examples/riverine_gauges.csv
2021-07-22 14:26:36,182 - build - model_api - INFO - setup_gauges.overwrite: False
2021-07-22 14:26:36,192 - build - data_adapter - INFO - DataCatalog: Getting riverine_gauges GeoDataFrame csv data from /home/runner/work/hydromt_sfincs/hydromt_sfincs/docs/_examples/riverine_gauges.csv
2021-07-22 14:26:36,254 - build - sfincs - INFO - obs set based on /home/runner/work/hydromt_sfincs/hydromt_sfincs/docs/_examples/riverine_gauges.csv
2021-07-22 14:26:36,254 - build - model_api - INFO - setup_river_inflow.basemaps_fn: merit_hydro
2021-07-22 14:26:36,255 - build - model_api - INFO - setup_river_inflow.river_upa: 25
2021-07-22 14:26:36,263 - build - data_adapter - INFO - DataCatalog: Getting merit_hydro RasterDataset raster data from /home/runner/.hydromt_data/data/v0.0.4/merit_hydro/{variable}.tif
2021-07-22 14:26:36,347 - build - data_adapter - DEBUG - RasterDataset: Clip with geom - [11.961, 45.772, 12.288, 45.948]
2021-07-22 14:26:36,455 - build - sfincs - DEBUG - Get river cells for inflow source points; upstream area threshold: 25 km2.
2021-07-22 14:26:36,471 - build - sfincs - DEBUG - Set river source points (.src).
2021-07-22 14:26:37,376 - build - sfincs - DEBUG - 3 river inflow point locations set.
2021-07-22 14:26:37,385 - build - sfincs - DEBUG - discharge forcing: setting src data for 3 points.
2021-07-22 14:26:37,385 - build - sfincs - DEBUG - discharge forcing: setting dis data.
2021-07-22 14:26:37,385 - build - sfincs - DEBUG - discharge forcing: updating sfincs.inp.
2021-07-22 14:26:37,385 - build - sfincs - DEBUG - Vectorize river.
2021-07-22 14:26:37,451 - build - model_api - INFO - setup_q_forcing.dataset_fn: None
2021-07-22 14:26:37,451 - build - model_api - INFO - setup_q_forcing.timeseries_fn: /home/runner/work/hydromt_sfincs/hydromt_sfincs/docs/_examples/discharge_input_sfincs.csv
2021-07-22 14:26:37,470 - build - sfincs - DEBUG - discharge forcing: setting src data for 3 points.
2021-07-22 14:26:37,470 - build - sfincs - DEBUG - discharge forcing: setting dis data.
2021-07-22 14:26:37,470 - build - model_api - WARNING - Replacing forcing: dis
2021-07-22 14:26:37,470 - build - sfincs - DEBUG - discharge forcing: updating sfincs.inp.
2021-07-22 14:26:37,470 - build - sfincs - INFO - Write model data to /home/runner/work/hydromt_sfincs/hydromt_sfincs/docs/_examples/sfincs_test_full
2021-07-22 14:26:37,470 - build - model_api - INFO - Writing model config to /home/runner/work/hydromt_sfincs/hydromt_sfincs/docs/_examples/sfincs_test_full/sfincs.inp
2021-07-22 14:26:37,472 - build - sfincs - DEBUG - Write binary map indices based on mask.
2021-07-22 14:26:37,513 - build - sfincs - DEBUG - Write binary map files: [&#39;dep&#39;, &#39;scs&#39;, &#39;manning&#39;, &#39;msk&#39;].
2021-07-22 14:26:37,690 - build - sfincs - DEBUG - Write GIS files for staticmaps to &#39;gis&#39; subfolder
2021-07-22 14:26:38,050 - build - sfincs - INFO - Write staticgeom files
2021-07-22 14:26:38,285 - build - sfincs - INFO - Write forcing files

</pre></div></div>
</div>
<p>With this example we build a complete SFINCS model including forcing. Compared to the previous <strong>hydromt build</strong> we have added: * <code class="docutils literal notranslate"><span class="pre">-i</span> <span class="pre">sfincs_riverine.ini</span></code> : setup configuration file including all components to build and their arguments</p>
<p>Next we check which files have been created. The model root should contain two netcdf (.nc) files, one for the staticmaps and one for the forcing data, a SFINCS configuration (sfincs.inp) file. These files are sufficient to run the SFINCS model. In addition several geometry (.geojson) files are saved in the <em>staticgeoms</em> folder. Finally, the setup process is logged in the hydromt.log file.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="n">root</span> <span class="o">=</span> <span class="s1">&#39;sfincs_test_full&#39;</span>
<span class="k">for</span> <span class="n">path</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">root</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39; - </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
sfincs_test_full
 - sfincs.obs
 - sfincs.inp
 - sfincs.man
 - sfincs.msk
 - sfincs.scs
 - sfincs.dis
 - sfincs.ind
 - sfincs.src
 - hydromt.log
 - sfincs.dep
sfincs_test_full/gis
 - rivers_out.geojson
 - dep.tif
 - rivers.geojson
 - msk.tif
 - obs.geojson
 - manning.tif
 - scs.tif
</pre></div></div>
</div>
</div>
<div class="section" id="Visualize-and/or-inspect-model-schematization">
<h2>Visualize and/or inspect model schematization<a class="headerlink" href="#Visualize-and/or-inspect-model-schematization" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="Inspecting-the-model">
<h2>Inspecting the model<a class="headerlink" href="#Inspecting-the-model" title="Permalink to this headline">¶</a></h2>
<p>Let’s have a closer look at the model. To interact with a model within a notebook or python script, we need to load a number of modules.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="o">%</span><span class="k">matplotlib</span> inline
<span class="kn">from</span> <span class="nn">hydromt_sfincs</span> <span class="kn">import</span> <span class="n">SfincsModel</span>
<span class="kn">import</span> <span class="nn">os</span>
</pre></div>
</div>
</div>
<p>Now we can load the model in memory and inspect it. Shown is the elevation in the SFINCS model as map, the main rivers as blue lines that determine the inflow locations, the minor rivers in red lines that determine the outflow locations and discharge input points as numbered triangles.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># define the model&#39;s configuration file</span>
<span class="n">root</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;./sfincs_test_full&#39;</span>
<span class="c1"># read the model with hydromt sfincs methods</span>
<span class="n">mod</span> <span class="o">=</span> <span class="n">SfincsModel</span><span class="p">(</span><span class="n">root</span><span class="o">=</span><span class="n">root</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;r&quot;</span><span class="p">)</span>
<span class="n">mod</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">mod</span><span class="o">.</span><span class="n">plot_basemap</span><span class="p">(</span><span class="n">geoms</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;src&#39;</span><span class="p">,</span> <span class="s1">&#39;obs&#39;</span><span class="p">,</span> <span class="s1">&#39;rivers_out&#39;</span><span class="p">,</span> <span class="s1">&#39;rivers&#39;</span><span class="p">],</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">14</span><span class="o">*</span><span class="mf">0.65</span><span class="p">),</span> <span class="n">legend_kwargs</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">ncol</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
(&lt;Figure size 1008x655.2 with 2 Axes&gt;,
 &lt;GeoAxesSubplot:title={&#39;center&#39;:&#39;SFINCS dep map&#39;}, xlabel=&#39;x coordinate UTM zone 33N [m]&#39;, ylabel=&#39;y coordinate UTM zone 33N [m]&#39;&gt;)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/_examples_build_riverine_model_27_1.png" src="../_images/_examples_build_riverine_model_27_1.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">mod</span><span class="o">.</span><span class="n">plot_forcing</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
(&lt;Figure size 432x216 with 1 Axes&gt;,
 [&lt;AxesSubplot:title={&#39;center&#39;:&#39;SFINCS discharge forcing (dis)&#39;}, ylabel=&#39;discharge\n[m3.s-1]&#39;&gt;])
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/_examples_build_riverine_model_28_1.png" src="../_images/_examples_build_riverine_model_28_1.png" />
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="update_model.html" class="btn btn-neutral float-right" title="Update existing Sfincs model with boundary conditions and forcing" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="build_coastal_model.html" class="btn btn-neutral float-left" title="Make a coastal sfincs model from scratch using hydromt" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright Deltares.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>